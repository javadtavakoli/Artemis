<scenario name="test1">

    <post id="register" url="/registrations">
        <vars>
            <var name="cell" value="09${_.generate(9, '0'..'9')}"/>
        </vars>

        <body type="json"><![CDATA[
{
	"name": "Foo Bar",
	"cell": "${cell}"
}
		]]></body>

        <assertRs status="200" type="json" properties="smsCode,token"/>
    </post>

    <put id="verify" url="/registrations">
        <headers>
            <header name="Authorization" value="${register.rs.token}"/>
        </headers>

        <body><![CDATA[
{
	"smsCode": "${register.rs.smsCode}"
}
		]]></body>

        <assertRs status="201" properties="userId"/>
    </put>

    <put id="updateProfile" url="/users/${verify.rs.userId}">
        <body><![CDATA[
{
	"city": "Tehran",
	"email": "a@a.com"
}
		]]></body>

        <assertRs status="200"/>
    </put>

</scenario>